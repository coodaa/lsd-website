---
import { fix } from "./utils/fix.js";
const { pages = [], activeSlug = "", footerPages = [] } = Astro.props;
---

<div class="sidebar">
  <!-- Mobile Toggle -->
  <button class="menu-toggle" id="menuToggle">
    <span class="menu-text">Menu</span>
    <span class="menu-close">Close</span>
  </button>

  <!-- Mobile + Desktop Menu -->
  <nav id="menuList">
    <ul>
      {pages.map((p) => (
        <li class={activeSlug && p.slug === activeSlug ? "active" : ""}>
          <a href={`/${p.slug}`}>{fix(p.title?.rendered || "")}</a>
        </li>
      ))}
    </ul>

    <!-- MOBILE: Impressum + Datenschutz unten -->
    <div class="mobile-footer-links">
      {footerPages.map((p, i) => (
        <>
          <a href={`/${p.slug}`}>{fix(p.title?.rendered || "")}</a>
          {i < footerPages.length - 1 && <span class="dot">Â·</span>}
        </>
      ))}
    </div>
  </nav>
</div>

<script>
  const toggle = document.getElementById("menuToggle");
  const menu = document.getElementById("menuList");

  toggle.addEventListener("click", () => {
    toggle.classList.toggle("open");
    menu.classList.toggle("open");
  });
</script>
