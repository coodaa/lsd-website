---
const { pages = [], activeSlug } = Astro.props;
---

<aside class="sidebar">
  <button class="menu-toggle" id="menuToggle">MENU</button>
  <button class="close-btn" id="closeMenu">X</button>

  <!-- Overlay -->
  <div class="menu-overlay" id="menuOverlay">
    <div class="menu-box">
      <ul>
        {pages.map((p) => (
          <li>
            <a
              href={`/${p.slug}`}
              class={p.slug === activeSlug ? "active" : ""}
            >
              {p.title.rendered}
            </a>
          </li>
        ))}
      </ul>
    </div>
  </div>

  <ul id="menuList" class="desktop-menu">
    {pages.map((p) => (
      <li>
        <a
          href={`/${p.slug}`}
          class={p.slug === activeSlug ? "active" : ""}
        >
          {p.title.rendered}
        </a>
      </li>
    ))}
  </ul>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const toggle = document.getElementById("menuToggle");
      const close = document.getElementById("closeMenu");
      const overlay = document.getElementById("menuOverlay");

      toggle?.addEventListener("click", () => {
        overlay.classList.add("open");
        toggle.style.display = "none";
        close.style.display = "block";
        document.body.style.overflow = "hidden";
      });

      const closeMenu = () => {
        overlay.classList.remove("open");
        toggle.style.display = "block";
        close.style.display = "none";
        document.body.style.overflow = "";
      };

      close?.addEventListener("click", closeMenu);

      overlay?.addEventListener("click", (e) => {
        if (e.target === overlay) closeMenu();
      });
    });
  </script>
</aside>
